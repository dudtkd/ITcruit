package kr.co.itcruit.main.service.impl;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

import org.springframework.stereotype.Service;

import kr.co.itcruit.main.service.IRecruitListService;
import kr.co.itcruit.mapper.IRecruitMapper;
import kr.co.itcruit.vo.RecruitVO;
import lombok.extern.slf4j.Slf4j;

@Service
@Slf4j
public class RecruitListServiceImpl implements IRecruitListService{

	@Inject
	private IRecruitMapper recruitMapper;
	
	
	
	//이곳은 (일반회원이) 채용정보를 조회하는 곳
	@Override
	public List<RecruitVO> getRecruitList() {
//		color: '#808080',
//      color: '#CC77FF',
		

		List<RecruitVO> recruitList = new ArrayList<>();

		LocalDate now = LocalDate.now();
        DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM");
        String time = now.format(formatter);
        time = time+"%";
		List<RecruitVO> startList = recruitMapper.getRecruitStartList(time);
		List<RecruitVO> endList = recruitMapper.getRecruitEndList(time);
		
		for(RecruitVO rv : startList) 
			rv.setColor("#CC77FF");
		for(RecruitVO rv : endList) 
			rv.setColor("#808080");
		
		recruitList.addAll(startList);
        recruitList.addAll(endList);
        
//        log.info(startList.get(0).getExtendedProps().toString());
//        log.info(">>>>>>>>>>>>>>>>>>" + startList);
//        log.info(">>>>>>>>>>>>>>>>>>" + endList);
//        log.info(">>>>>>>>>>>>>>>>>>" + recruitList);
        
		return recruitList;
	}

	
}
